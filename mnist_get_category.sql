-- Sergio Rivera 2023
--
-- ORACLE machine learning Hello World
-- Model evaluation example
--


-- A partir de una imagen (28x28), con
-- 8 bits de profundidad, se obtiene el
-- valor del número que ha sido escrito
-- en la imagen mediante una función que
-- invoca a un algoritmo de machine
-- learning (del 0 al 9). Las filas de
-- números que componen la imagen se escriben
-- sucesivamente en las columnas de una
-- tabla. La tabla tiene una columna ID,
-- otra de tipo numérico solo usada en
-- el entrenamiento del algoritmo, y las
-- 784 restantes que contienen los pixeles
-- de una imagen de 28x28.

-- Dos maneras de hacer las PREDICCIONES:

-- 1) Pasando los parámetros (o pixeles)
--    directamente en la query a la función
--    predictora:
SELECT prediction(DEEP_LEARNING_MODEL USING
0 as PX1, 0 as PX2, 0 as PX3, 0 as PX4, 0 as PX5, 0 as PX6, 0 as PX7, 0 as PX8, 0 as PX9, 0 as PX10, 0 as PX11, 0 as PX12, 0 as PX13, 0 as PX14, 0 as PX15, 0 as PX16, 0 as PX17, 0 as PX18, 0 as PX19, 0 as PX20, 0 as PX21, 0 as PX22, 0 as PX23, 0 as PX24, 0 as PX25, 0 as PX26, 0 as PX27, 0 as PX28, 0 as PX29, 0 as PX30, 0 as PX31, 0 as PX32, 0 as PX33, 0 as PX34, 0 as PX35, 0 as PX36, 0 as PX37, 0 as PX38, 0 as PX39, 0 as PX40, 0 as PX41, 0 as PX42, 0 as PX43, 0 as PX44, 0 as PX45, 0 as PX46, 0 as PX47, 0 as PX48, 0 as PX49, 0 as PX50, 0 as PX51, 0 as PX52, 0 as PX53, 0 as PX54, 0 as PX55, 0 as PX56, 0 as PX57, 0 as PX58, 0 as PX59, 0 as PX60, 0 as PX61, 0 as PX62, 0 as PX63, 0 as PX64, 0 as PX65, 0 as PX66, 0 as PX67, 0 as PX68, 0 as PX69, 0 as PX70, 0 as PX71, 0 as PX72, 0 as PX73, 0 as PX74, 0 as PX75, 0 as PX76, 0 as PX77, 0 as PX78, 0 as PX79, 0 as PX80, 0 as PX81, 0 as PX82, 0 as PX83, 0 as PX84, 0 as PX85, 0 as PX86, 0 as PX87, 0 as PX88, 0 as PX89, 0 as PX90, 0 as PX91, 0 as PX92, 0 as PX93, 0 as PX94, 0 as PX95, 0 as PX96, 0 as PX97, 0 as PX98, 0 as PX99, 0 as PX100, 0 as PX101, 0 as PX102, 0 as PX103, 0 as PX104, 0 as PX105, 0 as PX106, 0 as PX107, 0 as PX108, 0 as PX109, 0 as PX110, 0 as PX111, 0 as PX112, 0 as PX113, 0 as PX114, 0 as PX115, 0 as PX116, 0 as PX117, 0 as PX118, 0 as PX119, 0 as PX120, 0 as PX121, 0 as PX122, 0 as PX123, 0 as PX124, 0 as PX125, 0 as PX126, 0 as PX127, 0 as PX128, 0 as PX129, 0 as PX130, 0 as PX131, 0 as PX132, 0 as PX133, 0 as PX134, 0 as PX135, 0 as PX136, 0 as PX137, 0 as PX138, 0 as PX139, 0 as PX140, 0 as PX141, 0 as PX142, 0 as PX143, 0 as PX144, 0 as PX145, 0 as PX146, 0 as PX147, 0 as PX148, 0 as PX149, 0 as PX150, 0 as PX151, 0 as PX152, 3 as PX153, 18 as PX154, 18 as PX155, 18 as PX156, 126 as PX157, 136 as PX158, 175 as PX159, 26 as PX160, 166 as PX161, 255 as PX162, 247 as PX163, 127 as PX164, 0 as PX165, 0 as PX166, 0 as PX167, 0 as PX168, 0 as PX169, 0 as PX170, 0 as PX171, 0 as PX172, 0 as PX173, 0 as PX174, 0 as PX175, 0 as PX176, 30 as PX177, 36 as PX178, 94 as PX179, 154 as PX180, 170 as PX181,
253 as PX182, 253 as PX183, 253 as PX184, 253 as PX185, 253 as PX186, 225 as PX187, 172 as PX188, 253 as PX189, 242 as PX190, 195 as PX191, 64 as PX192, 0 as PX193, 0 as PX194, 0 as PX195, 0 as PX196, 0 as PX197, 0 as PX198, 0 as PX199, 0 as PX200, 0 as PX201, 0 as PX202, 0 as PX203, 49 as PX204, 238 as PX205, 253 as PX206, 253 as PX207, 253 as PX208, 253 as PX209, 253 as PX210, 253 as PX211, 253 as PX212, 253 as PX213, 251 as PX214, 93 as PX215, 82 as PX216, 82 as PX217, 56 as PX218, 39 as PX219, 0 as PX220, 0 as PX221, 0 as PX222, 0 as PX223, 0 as PX224, 0 as PX225, 0 as PX226, 0 as PX227, 0 as PX228, 0 as PX229, 0 as PX230, 0 as PX231, 18 as PX232, 219 as PX233, 253 as PX234, 253 as PX235, 253 as PX236, 253 as PX237, 253 as PX238, 198 as PX239, 182 as PX240, 247 as PX241, 241 as PX242, 0 as PX243, 0 as PX244, 0 as PX245, 0 as PX246, 0 as PX247, 0 as PX248, 0 as PX249, 0 as PX250, 0 as PX251, 0 as PX252, 0 as PX253, 0 as PX254, 0 as PX255, 0 as PX256, 0 as PX257, 0 as PX258, 0 as PX259, 0 as PX260, 80 as PX261, 156 as PX262, 107 as PX263, 253 as PX264, 253 as PX265, 205 as PX266, 11 as PX267, 0 as PX268, 43 as PX269, 154 as PX270, 0 as PX271, 0 as PX272, 0 as PX273, 0 as PX274, 0 as PX275, 0 as PX276, 0 as PX277, 0 as PX278, 0 as PX279, 0 as PX280, 0 as PX281, 0 as PX282, 0 as PX283, 0 as PX284, 0 as PX285, 0 as PX286, 0 as PX287, 0 as PX288, 0 as PX289, 14 as PX290, 1 as PX291, 154 as PX292, 253 as PX293, 90 as PX294, 0 as PX295, 0 as PX296, 0 as PX297, 0 as PX298, 0 as PX299, 0 as PX300, 0 as PX301, 0 as PX302, 0 as PX303, 0 as PX304, 0 as PX305, 0 as PX306, 0 as PX307, 0 as PX308, 0 as PX309, 0 as PX310, 0 as PX311, 0 as PX312, 0 as PX313, 0 as PX314, 0 as PX315, 0 as PX316, 0 as PX317, 0 as PX318, 0 as PX319,
139 as PX320, 253 as PX321, 190 as PX322, 2 as PX323, 0 as PX324, 0 as PX325, 0 as PX326, 0 as PX327, 0 as PX328, 0 as PX329, 0 as PX330, 0 as PX331, 0 as PX332, 0 as PX333, 0 as PX334, 0 as PX335, 0 as PX336, 0 as PX337, 0 as PX338, 0 as PX339, 0 as PX340, 0 as PX341, 0 as PX342, 0 as PX343, 0 as PX344, 0 as PX345, 0 as PX346, 0 as PX347, 11 as PX348, 190 as PX349, 253 as PX350, 70 as PX351, 0 as PX352, 0 as PX353, 0 as PX354, 0 as PX355, 0 as PX356, 0 as PX357, 0 as PX358, 0 as PX359, 0 as PX360, 0 as PX361, 0 as PX362, 0 as PX363, 0 as PX364, 0 as PX365, 0 as PX366, 0 as PX367, 0 as PX368, 0 as PX369, 0 as PX370, 0 as PX371, 0 as PX372, 0 as PX373, 0 as PX374, 0 as PX375, 0 as PX376, 35 as PX377, 241 as PX378, 225 as PX379, 160 as PX380, 108 as PX381, 1 as PX382, 0 as PX383, 0 as PX384, 0 as PX385, 0 as PX386, 0 as PX387, 0 as PX388, 0 as PX389, 0 as PX390, 0 as PX391, 0 as PX392, 0 as PX393, 0 as PX394, 0 as PX395, 0 as PX396, 0 as PX397, 0 as PX398, 0 as PX399, 0 as PX400, 0 as PX401, 0 as PX402, 0 as PX403, 0 as PX404, 0 as PX405, 81 as PX406, 240 as PX407, 253 as PX408, 253 as PX409, 119 as PX410, 25 as PX411, 0 as PX412, 0 as PX413, 0 as PX414, 0 as PX415, 0 as PX416, 0 as PX417, 0 as PX418, 0 as PX419, 0 as PX420, 0 as PX421, 0 as PX422, 0 as PX423, 0 as PX424, 0 as PX425, 0 as PX426, 0 as PX427, 0 as PX428, 0 as PX429, 0 as PX430, 0 as PX431, 0 as PX432, 0 as PX433, 0 as PX434, 45 as PX435, 186 as PX436, 253 as PX437, 253 as PX438, 150 as PX439, 27 as PX440, 0 as PX441, 0 as PX442, 0 as PX443, 0 as PX444, 0 as PX445, 0 as PX446, 0 as PX447, 0 as PX448, 0 as PX449, 0 as PX450, 0 as PX451, 0 as PX452, 0 as PX453, 0 as PX454, 0 as PX455, 0 as PX456, 0 as PX457, 0 as PX458, 0 as PX459, 0 as PX460, 0 as PX461, 0 as PX462, 0 as PX463, 16 as PX464, 93 as PX465, 252 as PX466, 253 as PX467, 187 as PX468, 0 as PX469, 0 as PX470, 0 as PX471, 0 as PX472, 0 as PX473, 0 as PX474, 0 as PX475, 0 as PX476, 0 as PX477, 0 as PX478, 0 as PX479, 0 as PX480, 0 as PX481, 0 as PX482, 0 as PX483, 0 as PX484, 0 as PX485, 0 as PX486, 0 as PX487, 0 as PX488, 0 as PX489,
0 as PX490, 0 as PX491, 0 as PX492, 0 as PX493, 249 as PX494, 253 as PX495, 249 as PX496, 64 as PX497, 0 as PX498, 0 as PX499, 0 as PX500, 0 as PX501, 0 as PX502, 0 as PX503, 0 as PX504, 0 as PX505, 0 as PX506, 0 as PX507, 0 as PX508, 0 as PX509, 0 as PX510, 0 as PX511, 0 as PX512, 0 as PX513, 0 as PX514, 0 as PX515, 0 as PX516, 0 as PX517, 0 as PX518, 46 as PX519, 130 as PX520, 183 as PX521, 253 as PX522, 253 as PX523, 207 as PX524, 2 as PX525, 0 as PX526, 0 as PX527, 0 as PX528, 0 as PX529, 0 as PX530, 0 as PX531, 0 as PX532, 0 as PX533, 0 as PX534, 0 as PX535, 0 as PX536, 0 as PX537, 0 as PX538, 0 as PX539, 0 as PX540, 0 as PX541, 0 as PX542, 0 as PX543, 0 as PX544, 39 as PX545, 148 as PX546, 229 as PX547, 253 as PX548, 253 as PX549, 253 as PX550, 250 as PX551, 182 as PX552, 0 as PX553, 0 as PX554, 0 as PX555, 0 as PX556, 0 as PX557, 0 as PX558, 0 as PX559, 0 as PX560, 0 as PX561, 0 as PX562, 0 as PX563, 0 as PX564, 0 as PX565, 0 as PX566, 0 as PX567, 0 as PX568, 0 as PX569, 0 as PX570, 24 as PX571, 114 as PX572, 221 as PX573, 253 as PX574, 253 as PX575, 253 as PX576, 253 as PX577, 201 as PX578, 78 as PX579, 0 as PX580, 0 as PX581, 0 as PX582, 0 as PX583, 0 as PX584, 0 as PX585, 0 as PX586, 0 as PX587, 0 as PX588, 0 as PX589, 0 as PX590, 0 as PX591, 0 as PX592, 0 as PX593, 0 as PX594, 0 as PX595, 0 as PX596, 23 as PX597, 66 as PX598, 213 as PX599, 253 as PX600, 253 as PX601, 253 as PX602, 253 as PX603, 198 as PX604, 81 as PX605, 2 as PX606, 0 as PX607, 0 as PX608, 0 as PX609, 0 as PX610, 0 as PX611, 0 as PX612, 0 as PX613, 0 as PX614, 0 as PX615, 0 as PX616, 0 as PX617, 0 as PX618, 0 as PX619, 0 as PX620, 0 as PX621, 0 as PX622, 18 as PX623, 171 as PX624, 219 as PX625, 253 as PX626, 253 as PX627, 253 as PX628,
253 as PX629, 195 as PX630, 80 as PX631, 9 as PX632, 0 as PX633, 0 as PX634, 0 as PX635, 0 as PX636, 0 as PX637, 0 as PX638, 0 as PX639, 0 as PX640, 0 as PX641, 0 as PX642, 0 as PX643, 0 as PX644, 0 as PX645, 0 as PX646, 0 as PX647, 0 as PX648, 55 as PX649, 172 as PX650, 226 as PX651, 253 as PX652, 253 as PX653, 253 as PX654, 253 as PX655, 244 as PX656, 133 as PX657, 11 as PX658, 0 as PX659, 0 as PX660, 0 as PX661, 0 as PX662, 0 as PX663, 0 as PX664, 0 as PX665, 0 as PX666, 0 as PX667, 0 as PX668, 0 as PX669, 0 as PX670, 0 as PX671, 0 as PX672, 0 as PX673, 0 as PX674, 0 as PX675, 0 as PX676, 136 as PX677, 253 as PX678, 253 as PX679, 253 as PX680, 212 as PX681, 135 as PX682, 132 as PX683, 16 as PX684, 0 as PX685, 0 as PX686, 0 as PX687, 0 as PX688, 0 as PX689, 0 as PX690, 0 as PX691, 0 as PX692, 0 as PX693, 0 as PX694, 0 as PX695, 0 as PX696, 0 as PX697, 0 as PX698, 0 as PX699, 0 as PX700, 0 as PX701, 0 as PX702, 0 as PX703, 0 as PX704, 0 as PX705, 0 as PX706, 0 as PX707, 0 as PX708, 0 as PX709, 0 as PX710, 0 as PX711, 0 as PX712, 0 as PX713, 0 as PX714, 0 as PX715, 0 as PX716, 0 as PX717, 0 as PX718, 0 as PX719, 0 as PX720, 0 as PX721, 0 as PX722, 0 as PX723, 0 as PX724, 0 as PX725, 0 as PX726, 0 as PX727, 0 as PX728, 0 as PX729, 0 as PX730, 0 as PX731, 0 as PX732, 0 as PX733, 0 as PX734, 0 as PX735, 0 as PX736, 0 as PX737, 0 as PX738, 0 as PX739, 0 as PX740, 0 as PX741, 0 as PX742, 0 as PX743, 0 as PX744, 0 as PX745, 0 as PX746, 0 as PX747, 0 as PX748, 0 as PX749, 0 as PX750, 0 as PX751, 0 as PX752, 0 as PX753, 0 as PX754, 0 as PX755, 0 as PX756, 0 as PX757, 0 as PX758, 0 as PX759, 0 as PX760, 0 as PX761, 0 as PX762, 0 as PX763, 0 as PX764, 0 as PX765, 0 as PX766, 0 as PX767, 0 as PX768, 0 as PX769, 0 as PX770, 0 as PX771, 0 as PX772, 0 as PX773, 0 as PX774, 0 as PX775, 0 as PX776, 0 as PX777, 0 as PX778, 0 as PX779, 0 as PX780, 0 as PX781, 0 as PX782, 0 as PX783, 0 as PX784
) pred FROM dual;
-- SELECT prediction(DEEP_LEARNING_MODEL USING 1,5,0,0,0,0,0,0,0,0,0,0

-- 2) Pasando el resultado de una query,
--    sobre una tabla que contiene imágenes,
--    lo que permite predicción múltiple
--
-- (MNIST es una tabla con 784+2 columnas,
-- siendo las 784 últimas una imagen serializada
-- de 28*28 pixeles. Cada imagen contiene un
-- sólo número del 0 al 9):
SELECT ID, RES,
 PREDICTION (DEEP_LEARNING_MODEL USING *) NN_RES
FROM MNIST where id < 3;
